<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animate Through Curved Path</title>
    <style>
        /* body {
            display: flex;
            flex-direction: column;
        } */
    </style>
</head>

<body>
    <!-- <svg xmlns="http://www.w3.org/2000/svg" width="1023.757" height="565.97" viewBox="0 0 6047 3343">
        <defs>
            <style>
                .cls-1 {
                    fill: #111;
                    fill-rule: evenodd;
                }
            </style>
        </defs>
        <path class="cls-1"
            d="M518,176A5847.582,5847.582,0,0,1,3523,635c531.09,305.833,1011.85,687.76,1429,1136,729.22,783.58,1063.81,1555.91,1053,1562-16.58,9.34-700.97-1876.18-2492.82-2757.2C1814.41-258.971-18.73,214.628-18,222-17.636,225.681,446.793,182.565,518,176Z" />
    </svg> -->

    <div class="animation-section" style="height: 200vh; background-color: #efefef; display: flex; flex-direction: row;">
        <div class="box-1"
            style="width: 150px; height: 150px; background-color: black; display: flex; align-items: center; justify-content: center; color: white; margin-right: 50px; **position: absolute;**">
            BOX 1
        </div>
        <div class="box-2"
            style="width: 150px; height: 150px; background-color: black; display: flex; align-items: center; justify-content: center; color: white; margin-right: 50px; **position: absolute;**">
            BOX 2
        </div>
        <div class="box-3"
            style="width: 150px; height: 150px; background-color: black; display: flex; align-items: center; justify-content: center; color: white; margin-right: 50px; **position: absolute;**">
            BOX 3
        </div>
    </div>
    <!-- GSAP Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/MotionPathPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/DrawSVGPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
    <script>
    gsap.registerPlugin(MotionPathPlugin, ScrollTrigger);

    // Use a function to run the code after the DOM/window is fully ready
    window.addEventListener('load', () => {
        let boxes = gsap.utils.toArray('.box-1, .box-2, .box-3');
        let tl = gsap.timeline();
        
        // Define path coordinates dynamically
        // Note: x:0, y:0 is now the FINAL destination
        const pathCoordinates = [
            { x: 0, y: 0 }, 
            { x: window.innerWidth / 2, y: window.innerHeight / 6 }, 
            { x: window.innerWidth + 100, y: window.innerHeight }
        ];

        // 1. **Apply the animation to ALL boxes using stagger**
        const slideInAnimation = tl.from(boxes, { // <-- Use .from()
            ease: "power2.out",
            stagger: 0.15, // Stagger the start of each box
            motionPath: {
                path: pathCoordinates,
                // alignOrigin will make the box center follow the path
                alignOrigin: [0.5, 0.5], 
                start: 0, // Start at the end of the path (off-screen)
                end: 1    // Animate TO the start of the path (on-screen, 0,0)
            }
        });

        // 2. **ATTACH SCROLLTRIGGER**
        ScrollTrigger.create({
            trigger: ".animation-section",
            start: "top top", 
            end: "bottom top", 
            scrub: true,
            pin: true,
            animation: slideInAnimation, 
            // markers: true,
        });
    });
</script>
</body>

</html>